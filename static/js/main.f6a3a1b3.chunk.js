(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{306:function(e,t,r){},307:function(e,t,r){},308:function(e,t,r){},309:function(e,t,r){},311:function(e,t,r){},312:function(e,t,r){},313:function(e,t,r){},314:function(e,t,r){},315:function(e,t,r){},316:function(e,t,r){},317:function(e,t,r){},318:function(e,t,r){},319:function(e,t,r){},320:function(e,t,r){},321:function(e,t,r){},322:function(e,t,r){},323:function(e,t,r){},324:function(e,t,r){},325:function(e,t,r){},326:function(e,t,r){"use strict";r.r(t);var n,a,s,i,o,c,l,u=r(13),d=r(0),h=r.n(d),p=r(22),b=r.n(p),v=r(24),m=r(29),j=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,383)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;r(e),n(e),a(e),s(e),i(e)}))},f=r(34),O=r(7),g=r(9),x=r(21),y=(r(113),r(8)),S=new(n=function(){function e(){Object(O.a)(this,e),Object(f.a)(this,"user",a,this),Object(y.m)(this)}return Object(g.a)(e,[{key:"setUser",value:function(e){this.user=e}},{key:"unsetUser",value:function(){this.user=void 0}},{key:"isLoggedIn",get:function(){return!!this.user}},{key:"user",get:function(){return this.user}},{key:"isAdmin",get:function(){var e;return null===(e=this.user)||void 0===e?void 0:e.isAdmin}}]),e}(),a=Object(x.a)(n.prototype,"user",[y.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Object(x.a)(n.prototype,"setUser",[y.f],Object.getOwnPropertyDescriptor(n.prototype,"setUser"),n.prototype),Object(x.a)(n.prototype,"unsetUser",[y.f],Object.getOwnPropertyDescriptor(n.prototype,"unsetUser"),n.prototype),n),E="LOADER",k="OFFLINE",w="ERROR",D="COMMON",L=new(s=function(){function e(){var t=this;Object(O.a)(this,e),Object(f.a)(this,"isOnline",i,this),Object(f.a)(this,"token",o,this),Object(f.a)(this,"renderState",c,this),Object(f.a)(this,"errorMessage",l,this),window.addEventListener("online",(function(){console.log("this.isOnline: true"),t.isOnline=!0})),window.addEventListener("offline",(function(){console.log("this.isOnline: false"),t.isOnline=!1})),Object(y.m)(this)}return Object(g.a)(e,[{key:"setToken",value:function(e){this.token=e,window.localStorage.setItem("token",e)}},{key:"unsetToken",value:function(){this.token=void 0,window.localStorage.removeItem("token")}},{key:"setRenderState",value:function(e){this.renderState=e}},{key:"setErrorMessage",value:function(e){this.errorMessage=e}},{key:"getErrorMessage",value:function(){return this.errorMessage}}]),e}(),i=Object(x.a)(s.prototype,"isOnline",[y.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return window.navigator.onLine}}),o=Object(x.a)(s.prototype,"token",[y.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return window.localStorage.getItem("token")}}),Object(x.a)(s.prototype,"setToken",[y.f],Object.getOwnPropertyDescriptor(s.prototype,"setToken"),s.prototype),Object(x.a)(s.prototype,"unsetToken",[y.f],Object.getOwnPropertyDescriptor(s.prototype,"unsetToken"),s.prototype),c=Object(x.a)(s.prototype,"renderState",[y.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return E}}),Object(x.a)(s.prototype,"setRenderState",[y.f],Object.getOwnPropertyDescriptor(s.prototype,"setRenderState"),s.prototype),l=Object(x.a)(s.prototype,"errorMessage",[y.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object(x.a)(s.prototype,"setErrorMessage",[y.f],Object.getOwnPropertyDescriptor(s.prototype,"setErrorMessage"),s.prototype),s),N=r(11),I=r(12),T=r(117),_=r.n(T),C=r(261),M=function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(){return Object(O.a)(this,r),t.apply(this,arguments)}return r}(Object(C.a)(Error)),R=r(164),A=function(){function e(t){Object(O.a)(this,e),this.init(t),this.name="my own response"}return Object(g.a)(e,[{key:"init",value:function(e){for(var t in e)this[t]=e[t]}},{key:"getApiCode",value:function(){return parseInt(this.getNestedPropertyValue(this,"data.code"))}},{key:"getApiMessage",value:function(){return this.getNestedPropertyValue(this,"data.message")}},{key:"getApiData",value:function(){return this.getNestedPropertyValue(this,"data.data")}},{key:"hasValidApiResponse",value:function(){return!(!Number.isInteger(this.getApiCode())||null===this.getApiMessage())}},{key:"getErrorFields",value:function(){var e=this.getApiData();return e?e.errors:{}}},{key:"hasNestedProperty",value:function(e,t){var r=t.split(".");return function e(t,r){if("undefined"===typeof t)return!1;for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];return a.length?e.apply(void 0,[t[r]].concat(a)):t.hasOwnProperty(r)}.apply(void 0,[e].concat(Object(R.a)(r)))}},{key:"getNestedPropertyValue",value:function(e,t){var r=t.split(".");return function e(t,r){if("undefined"===typeof t)return null;for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];return a.length?e.apply(void 0,[t[r]].concat(a)):t.hasOwnProperty(r)?t[r]:null}.apply(void 0,[e].concat(Object(R.a)(r)))}}]),e}(),P=_.a.create({baseURL:"https://tim.lookfor.be/api/v1"});P.interceptors.request.use((function(e){var t=L.token;return e.headers={Authorization:"Bearer ".concat(t)},e})),P.interceptors.response.use((function(e){return function(e){var t=new A(e);if(!t.hasValidApiResponse()){var r=M("Invalid response from server");return Promise.reject({error:r,response:t})}return Promise.resolve({error:!1,response:t})}(e)}),(function(e){return function(e){var t=new A(e.response);return Promise.reject({error:e,response:t})}(e)}));var V,F,W,H,U,Y,q,z,B,G,X,Z,$,K,J,Q,ee,te,re,ne,ae,se,ie,oe,ce,le,ue,de,he,pe,be=function e(){Object(O.a)(this,e),this.axios=P},ve=new(function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(){return Object(O.a)(this,r),t.apply(this,arguments)}return Object(g.a)(r,[{key:"addEvent",value:function(e){return this.axios.post("/events/event/",e)}},{key:"changeEvent",value:function(e,t){return this.axios.put("/events/event/"+e,t)}},{key:"deleteEvent",value:function(e){return this.axios.delete("/events/event/"+e)}},{key:"getEvent",value:function(e){return this.axios.get("/events/event/"+e)}},{key:"list",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={date:e,rooms:t};return this.axios.get("/events/list",{params:r})}},{key:"getMyEvents",value:function(){return this.axios.get("/events/myEvents")}}]),r}(be)),me="INIT",je="COMMON",fe="FAILURE",Oe=new(V=function(){function e(){Object(O.a)(this,e),Object(f.a)(this,"renderState",F,this),Object(f.a)(this,"events",W,this),Object(y.m)(this)}return Object(g.a)(e,[{key:"loadProfile",value:function(e){var t=this;this.renderState=me,ve.getMyEvents().then(Object(y.f)((function(e){var r=e.response.getApiData();t.renderState=je,t.events=r.events}))).catch(Object(y.f)((function(e){e.error,e.response;t.events=[],t.renderState=fe})))}}]),e}(),F=Object(x.a)(V.prototype,"renderState",[y.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return me}}),W=Object(x.a)(V.prototype,"events",[y.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(x.a)(V.prototype,"loadProfile",[y.f],Object.getOwnPropertyDescriptor(V.prototype,"loadProfile"),V.prototype),V),ge=new(function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(){return Object(O.a)(this,r),t.apply(this,arguments)}return Object(g.a)(r,[{key:"verify",value:function(){return this.axios.get("/auth/verify")}},{key:"login",value:function(e,t){return this.axios.post("/auth/login",{email:e,password:t})}},{key:"logout",value:function(){return this.axios.post("/auth/logout")}},{key:"register",value:function(e){return this.axios.post("/auth/register",e)}}]),r}(be)),xe={AUTH:{FAILURE:1e3,VALIDATION:1001,EMAIL_EXISTS:1002,LOGIN:1003,EMPTY_CREDENTIALS:1004,INVALID_CREDENTIALS:1005,LOGOUT:1006,VERIFY:1007,UNSIGNED_TOKEN:1007,INVALID_USER:1008},EVENTS:{FAILURE:1100,VALIDATION:1101,ROOM_NOT_EXISTS:1102,ROOM_NOT_ACTIVE:1103,CROSS_DATES:1104,NOT_EXISTS:1105,NOT_BELONG_TO_YOU:1106,ID_REQUIRED:1107,ID_INVALID:1108},LOGIN:{EMPTY_CREDENTIALS:1200,INVALID_CREDENTIALS:1201,JWT_UNAUTHORIZED:1202,UNSIGNED_TOKEN:1203,INVALID_TOKEN:1204,EMAIL_EXISTS:1205},ROOMS:{FAILURE:1300,INVALID_DATE:1301}},ye="COMMON",Se="FAILURE",Ee=new(H=function(){function e(){Object(O.a)(this,e),Object(f.a)(this,"values",U,this),Object(f.a)(this,"renderState",Y,this),Object(f.a)(this,"errors",q,this),Object(f.a)(this,"serviceMessage",z,this),Object(f.a)(this,"inProgress",B,this),Object(y.m)(this)}return Object(g.a)(e,[{key:"reset",value:function(){this.values.name="",this.values.email="",this.values.password="",this.values.password_confirm="",this.serviceMessage="",this.errors={}}},{key:"setName",value:function(e){this.values.name=e;var t=function(e){return!!RegExp(/^[a-z]\w{2,30}$/i).test(e)||{message:"Name should starts with letter, and contain minimum 3 character"}}(e);console.log("name",t),!0===t?delete this.errors.name:this.errors.name=t}},{key:"setEmail",value:function(e){this.values.email=e;var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!!RegExp(/^[a-zA-Z0-9]+@[a-zA-Z0-9]+\.[A-Za-z]+$/).test(e)||{message:"Invalid Email"}}(e);!0===t?delete this.errors.email:this.errors.email=t}},{key:"setPassword",value:function(e){this.values.password=e;var t=function(){return!!/^.*(?=.{8,})(?=.*[a-zA-Z])(?=.*\d)(?=.*[!#$%&? "]).*$/.test(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")||{message:"must contain 8 characters and at least one number, one letter and one unique character such as !#$%&?"}}(e);!0===t?delete this.errors.password:this.errors.password=t}},{key:"setPasswordConfirm",value:function(e){this.values.password_confirm=e,console.log(this.values.password,this.values.password_confirm),!0===(this.values.password===this.values.password_confirm)?delete this.errors.password_confirm:this.errors.password_confirm={message:"Passwords dismatched"}}},{key:"login",value:function(){var e=this;return this.inProgress=!0,this.serviceMessage="",ge.login(this.values.email,this.values.password).then(Object(y.f)((function(e){var t=e.response.getApiData();S.setUser(t.user),L.setToken(t.user.token)}))).catch(Object(y.f)((function(t){t.error;var r=t.response,n=r.getApiMessage(),a=r.getApiCode();switch(e.renderState=Se,a){case xe.AUTH.INVALID_CREDENTIALS:case xe.AUTH.EMPTY_CREDENTIALS:e.serviceMessage="Invalid credentials";break;default:console.log("authStore login default case",n),e.serviceMessage="Server error"}throw new Error("Server error")}))).finally(Object(y.f)((function(){e.inProgress=!1})))}},{key:"register",value:function(){var e=this;this.inProgress=!1;var t={name:this.values.name,email:this.values.email,password:this.values.password};return ge.register(t).then(Object(y.f)((function(e){var t=e.response.getApiData();S.setUser(t.user),L.setToken(t.user.token)}))).catch(Object(y.f)((function(t){var r=t.error,n=t.response,a=n.getApiMessage(),s=n.getApiCode(),i=n.getApiData();switch(console.log("register catch",s,a),s){case xe.AUTH.VALIDATION:e.errors=i.errors;break;case xe.AUTH.EMAIL_EXISTS:e.errors={email:{message:"Email exists"}};break;default:e.serviceMessage="Server error"}throw r}))).finally(Object(y.f)((function(){e.inProgress=!1})))}}]),e}(),U=Object(x.a)(H.prototype,"values",[y.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{email:"",password:"",name:"",password_confirm:""}}}),Object(x.a)(H.prototype,"reset",[y.f],Object.getOwnPropertyDescriptor(H.prototype,"reset"),H.prototype),Object(x.a)(H.prototype,"setName",[y.f],Object.getOwnPropertyDescriptor(H.prototype,"setName"),H.prototype),Object(x.a)(H.prototype,"setEmail",[y.f],Object.getOwnPropertyDescriptor(H.prototype,"setEmail"),H.prototype),Object(x.a)(H.prototype,"setPassword",[y.f],Object.getOwnPropertyDescriptor(H.prototype,"setPassword"),H.prototype),Object(x.a)(H.prototype,"setPasswordConfirm",[y.f],Object.getOwnPropertyDescriptor(H.prototype,"setPasswordConfirm"),H.prototype),Y=Object(x.a)(H.prototype,"renderState",[y.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ye}}),q=Object(x.a)(H.prototype,"errors",[y.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),z=Object(x.a)(H.prototype,"serviceMessage",[y.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),B=Object(x.a)(H.prototype,"inProgress",[y.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(x.a)(H.prototype,"login",[y.f],Object.getOwnPropertyDescriptor(H.prototype,"login"),H.prototype),Object(x.a)(H.prototype,"register",[y.f],Object.getOwnPropertyDescriptor(H.prototype,"register"),H.prototype),H),ke=r(10),we=r.n(ke),De=r(17),Le=r(23),Ne=r(262),Ie=r(1),Te=function(e){var t=e.component,r=Object(Ne.a)(e,["component"]);return Object(Ie.jsx)(Le.b,Object(u.a)(Object(u.a)({},r),{},{render:function(e){return r.isLoggedIn?Object(Ie.jsx)(t,Object(u.a)({},e)):Object(Ie.jsx)(Le.a,{to:"/login"})}}))},_e=(r(306),function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(e){var n;return Object(O.a)(this,r),(n=t.call(this,e)).backgroundColor=n.props.backgroundColor||"inherit",n.color=n.props.color||"inherit",n}return Object(g.a)(r,[{key:"render",value:function(){var e={backgroundColor:this.backgroundColor,color:this.color};return Object(Ie.jsxs)("div",{className:"bayan",style:e,children:[Object(Ie.jsx)("div",{children:"\xb7"}),Object(Ie.jsx)("div",{children:"\xb7"}),Object(Ie.jsx)("div",{children:"\xb7"})]})}}]),r}(h.a.Component)),Ce=r(358),Me=Object(v.b)("appStore")(G=Object(v.b)("userStore")(G=function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(){return Object(O.a)(this,r),t.apply(this,arguments)}return Object(g.a)(r,[{key:"doLogout",value:function(){var e=this;ge.logout().finally((function(){e.props.userStore.setUser(void 0),e.props.appStore.unsetToken()}))}},{key:"render",value:function(){return console.log("LogoutLink render",this.props.userStore.isLoggedIn),this.props.userStore.isLoggedIn?Object(Ie.jsx)(Ce.a,{href:"#",onClick:this.doLogout.bind(this),children:"Logout"}):""}}]),r}(h.a.Component))||G)||G,Re=r(362),Ae=r(327),Pe=(r(307),Object(v.b)("userStore")(X=function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(){return Object(O.a)(this,r),t.apply(this,arguments)}return Object(g.a)(r,[{key:"render",value:function(){var e=this.props.userStore;if(e.user){var t="";return e.isAdmin&&(t=Object(Ie.jsx)(Ce.a,{component:m.b,to:"/rooms",children:"Rooms"})),Object(Ie.jsx)(Re.a,{position:"static",color:"primary",children:Object(Ie.jsxs)(Ae.a,{children:[Object(Ie.jsx)(Me,{}),t,Object(Ie.jsx)(Ce.a,{component:m.b,to:"/events",children:"Events"}),Object(Ie.jsx)(Ce.a,{component:m.b,to:"/@".concat(e.user.name),children:"Profile"})]})})}return Object(Ie.jsx)(Re.a,{position:"static",children:Object(Ie.jsxs)(Ae.a,{children:[Object(Ie.jsx)(Ce.a,{component:m.b,to:"/login",children:"Login"}),Object(Ie.jsx)(Ce.a,{component:m.b,to:"/register",children:"Register"})]})})}}]),r}(h.a.Component))||X),Ve=(r(308),function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(){return Object(O.a)(this,r),t.apply(this,arguments)}return Object(g.a)(r,[{key:"render",value:function(){return Object(Ie.jsx)("footer",{children:Object(Ie.jsx)(Ae.a,{className:"footer",children:Object(Ie.jsxs)("div",{children:["Based on ",Object(Ie.jsx)(Ce.a,{href:"https://reactjs.org",children:"React"}),h.a.version]})})})}}]),r}(h.a.Component)),Fe=r(363),We=r(328),He=r(264),Ue=r(336),Ye=r(108),qe=(r(309),Object(v.b)("authStore")(Z=Object(v.c)(Z=function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(){var e;Object(O.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).handleSubmit=function(t){t.preventDefault(),e.props.authStore.login().then((function(){return e.props.history.replace("/")})).catch((function(e){console.log(e)}))},e.handleEmailChange=function(t){console.log(t.target.value),e.props.authStore.setEmail(t.target.value)},e.handlePasswordChange=function(t){e.props.authStore.setPassword(t.target.value)},e}return Object(g.a)(r,[{key:"componentWillUnmount",value:function(){this.props.authStore.reset()}},{key:"render",value:function(){console.log("Login page render");var e=this.props.authStore.errors,t=this.props.authStore.serviceMessage;return Object(Ie.jsx)(Fe.a,{maxWidth:"sm",children:Object(Ie.jsxs)("div",{className:"login page",children:[Object(Ie.jsx)("h2",{className:"text-center",children:"Login page"}),Object(Ie.jsxs)("form",{onSubmit:this.handleSubmit,noValidate:!0,children:[Object(Ie.jsx)(We.a,{className:"login__form-control",children:Object(Ie.jsx)(He.a,{name:"email",label:"Email:",value:this.props.authStore.values.email,fullWidth:!0,variant:"outlined",type:"text",onChange:this.handleEmailChange,error:!!(null===e||void 0===e?void 0:e.email)})}),Object(Ie.jsx)(We.a,{className:"login__form-control",children:Object(Ie.jsx)(He.a,{name:"password",label:"Password:",value:this.props.authStore.values.password,fullWidth:!0,variant:"outlined",type:"password",onChange:this.handlePasswordChange,error:!!(null===e||void 0===e?void 0:e.password)})}),Object(Ie.jsxs)(We.a,{error:!!t.length,className:"login__serviceContainer",children:[this.props.authStore.inProgress&&Object(Ie.jsx)(_e,{}),Object(Ie.jsx)(Ue.a,{children:t})]}),Object(Ie.jsx)(We.a,{children:Object(Ie.jsx)(Ye.a,{variant:"contained",color:"secondary",fullWidth:!0,type:"submit",disabled:this.props.authStore.inProgress,children:"Login"})}),Object(Ie.jsx)("p",{className:"login__invite",children:Object(Ie.jsx)(Ce.a,{color:"primary",component:m.b,to:"/register",children:"Don't have account? click register"})})]})]})})}}]),r}(h.a.Component))||Z)||Z),ze=(r(311),Object(v.b)("authStore")($=Object(v.c)($=function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(){var e;Object(O.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).handleSubmit=function(t){t.preventDefault(),e.props.authStore.register().then((function(){e.props.history.replace("/")})).catch((function(e){console.log(e)}))},e.handleChangeName=function(t){e.props.authStore.setName(t.target.value)},e.handleChangeEmail=function(t){e.props.authStore.setEmail(t.target.value)},e.handlePasswordChange=function(t){e.props.authStore.setPassword(t.target.value)},e.handlePasswordConfirmChange=function(t){e.props.authStore.setPasswordConfirm(t.target.value)},e}return Object(g.a)(r,[{key:"componentWillUnmount",value:function(){this.props.authStore.reset()}},{key:"render",value:function(){var e,t,r,n,a=this.props.authStore.errors;console.log("errors",a.email);var s=(null===a||void 0===a||null===(e=a.name)||void 0===e?void 0:e.message)||"Name should starts with letter, and contain minimum 3 character",i=(null===a||void 0===a||null===(t=a.email)||void 0===t?void 0:t.message)||"Email is invalid",o=(null===a||void 0===a||null===(r=a.password_confirm)||void 0===r?void 0:r.message)||"Invalid password confirmation",c=(null===a||void 0===a||null===(n=a.password)||void 0===n?void 0:n.message)||"Password must contain 8 characters and at least one number, one letter and one special character",l=this.props.authStore.serviceMessage;return Object(Ie.jsx)(Fe.a,{maxWidth:"sm",children:Object(Ie.jsxs)("div",{className:"register page",children:[Object(Ie.jsx)("h2",{className:"text-center",children:"Register new user"}),Object(Ie.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(Ie.jsxs)(We.a,{error:!!a.name,children:[Object(Ie.jsx)(He.a,{name:"name",onChange:this.handleChangeName,id:"name",label:"Name:",fullWidth:!0,variant:"outlined"}),!!a.name&&Object(Ie.jsx)(Ue.a,{className:"errorHelper",children:s})]}),Object(Ie.jsxs)(We.a,{error:!!a.email,children:[Object(Ie.jsx)(He.a,{onChange:this.handleChangeEmail,name:"email",fullWidth:!0,label:"Email:",variant:"outlined"}),!!a.email&&Object(Ie.jsx)(Ue.a,{className:"errorHelper",children:i})]}),Object(Ie.jsxs)(We.a,{error:!!a.password,children:[Object(Ie.jsx)(He.a,{onChange:this.handlePasswordChange,name:"password",fullWidth:!0,label:"Password:",variant:"outlined",type:"password"}),!!a.password&&Object(Ie.jsx)(Ue.a,{id:"password-error",children:c})]}),Object(Ie.jsxs)(We.a,{error:!!a.password_confirm,children:[Object(Ie.jsx)(He.a,{onChange:this.handlePasswordConfirmChange,name:"password_confirm",fullWidth:!0,label:"Password confirm:",variant:"outlined",type:"password"}),!!a.password_confirm&&Object(Ie.jsx)(Ue.a,{children:o})]}),Object(Ie.jsxs)(We.a,{error:!!l.length,className:"serviceMessage",children:[this.props.authStore.inProgress&&Object(Ie.jsx)(_e,{}),Object(Ie.jsx)(Ue.a,{children:l})]}),Object(Ie.jsx)(We.a,{children:Object(Ie.jsx)(Ye.a,{variant:"contained",color:"secondary",fullWidth:!0,type:"submit",disabled:this.props.authStore.inProgress,children:"Register"})})]})]})})}}]),r}(h.a.Component))||$)||$),Be=r(132),Ge=function(){function e(){Object(O.a)(this,e)}return Object(g.a)(e,[{key:"assignProps",value:function(e){var t=this;Object.keys(e).forEach((function(r){t[r]=e[r]}))}}]),e}(),Xe=function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(O.a)(this,r),(e=t.call(this))._id="",e.number="",e.assignProps(n),e}return r}(Ge),Ze=function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(O.a)(this,r),(e=t.call(this))._id="",e.name="",e.email="",e.assignProps(n),e}return r}(Ge),$e=function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(O.a)(this,r),(e=t.call(this))._id="",e.room=new Xe,e.user=new Ze,e.title="",e.description="",e.date_start="",e.date_end="",e.assignProps(n),e}return r}(Ge),Ke=r(20),Je=r.n(Ke),Qe=function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(){return Object(O.a)(this,r),t.apply(this,arguments)}return Object(g.a)(r,null,[{key:"dateFormat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Je()(e).format(t)}},{key:"dateFormatClient",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ddd DD YYYY HH:mm";return Je()(e).format(t)}}]),r}($e),et=r(380),tt=function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(e){var n;return Object(O.a)(this,r),(n=t.call(this,e)).data=[],"string"===typeof n.props.data||n.props.data instanceof String?n.data.push(n.props.data):n.data=n.props.data,n.severity=n.props.severity||"error",n}return Object(g.a)(r,[{key:"render",value:function(){return Object(Ie.jsx)(et.a,{className:"ServerError",severity:this.severity,children:this.data.map((function(e,t){return Object(Ie.jsx)("div",{children:e},t)}))})}}]),r}(h.a.Component),rt=function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(e){var n;return Object(O.a)(this,r),(n=t.call(this,e)).data=[],"string"===typeof n.props.data||n.props.data instanceof String?n.data.push(n.props.data):n.data=n.props.data,n.severity=n.props.severity||"error",n}return Object(g.a)(r,[{key:"render",value:function(){return Object(Ie.jsx)(et.a,{className:"appError",severity:this.severity,children:this.data.map((function(e,t){return Object(Ie.jsx)("div",{children:e},t)}))})}}]),r}(h.a.Component),nt=(r(312),Object(v.b)("profileStore")(K=Object(v.c)(K=function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(){var e;Object(O.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).renderEventList=function(){var t=4,r="";return e.props.profileStore.events.length?r=e.props.profileStore.events.map((function(e,t){return Object(Ie.jsxs)(Be.a,{item:!0,sm:4,className:"event",children:[Object(Ie.jsxs)("div",{children:["Room: ",e.room.number]}),Object(Ie.jsxs)("div",{children:["Title: ",e.title]}),Object(Ie.jsxs)("div",{children:["Date start: ",Qe.dateFormatClient(e.date_start)]}),Object(Ie.jsxs)("div",{children:["Date start: ",Qe.dateFormatClient(e.date_end)]}),Object(Ie.jsxs)("div",{children:[Object(Ie.jsxs)("div",{children:["Status: ",e.status]}),Object(Ie.jsx)(Ce.a,{component:m.b,variant:"inherit",to:"/events/change/".concat(e._id),children:"change"}),"\xa0|\xa0",Object(Ie.jsx)(Ce.a,{component:m.b,variant:"inherit",to:"/events/delete/".concat(e._id),children:"delete"})]})]},e._id)})):(r=Object(Ie.jsx)("p",{children:"You dont have any events"}),t=0),Object(Ie.jsxs)("div",{className:"events",children:[Object(Ie.jsx)("h3",{children:"Events"}),Object(Ie.jsx)(Be.a,{container:!0,className:"eventsList",spacing:t,children:r})]})},e}return Object(g.a)(r,[{key:"componentDidMount",value:function(){var e=Object(De.a)(we.a.mark((function e(){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.profileStore.loadProfile();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){console.info("render profile page",this.props.profileStore.renderState);var e=null;switch(this.props.profileStore.renderState){case me:e=Object(Ie.jsx)(_e,{});break;case je:e=this.renderEventList();break;case fe:e=Object(Ie.jsx)(tt,{data:"Server error"});break;default:e=Object(Ie.jsx)(rt,{data:"Application error"})}return Object(Ie.jsx)(Fe.a,{maxWidth:"md",className:"profile page ".concat(this.props.profileStore.renderState),children:e})}}]),r}(h.a.PureComponent))||K)||K),at=r(258),st=r(128),it=r(27),ot=r(366),ct={INIT:"INIT",FAILURE:"FAILURE",COMMON:"COMMON"},lt={renderState:ct.INIT,serviceMessage:null,errors:{},isLoading:!1},ut=function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(e){var n;return Object(O.a)(this,r),(n=t.call(this,e)).getServerErrorState=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={serviceMessage:e,renderState:ct.FAILURE},n=Object.assign(r,t);return n},n.alert=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n.setState(e),t&&n.scrollToMessages()},n.state=lt,n}return Object(g.a)(r,[{key:"scrollToMessages",value:function(){var e=this.constructor.name+"Messages",t=document.querySelector("#"+e);t&&t.scrollIntoView({behavior:"smooth"})}},{key:"getPermissionErrorState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={serviceMessage:e,renderState:ct.FAILURE},n=Object.assign(r,t);return n}},{key:"getValidationErrorState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={serviceMessage:e,errors:t},a=Object.assign(n,r);return a}}]),r}(h.a.Component);function dt(){return(dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ht(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function pt(e,t){var r=e.title,n=e.titleId,a=ht(e,["title","titleId"]);return d.createElement("svg",dt({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 443.52 443.52",style:{enableBackground:"new 0 0 443.52 443.52"},xmlSpace:"preserve",ref:t,"aria-labelledby":n},a),r?d.createElement("title",{id:n},r):null,J||(J=d.createElement("g",null,d.createElement("g",null,d.createElement("path",{d:"M143.492,221.863L336.226,29.129c6.663-6.664,6.663-17.468,0-24.132c-6.665-6.662-17.468-6.662-24.132,0l-204.8,204.8 c-6.662,6.664-6.662,17.468,0,24.132l204.8,204.8c6.78,6.548,17.584,6.36,24.132-0.42c6.387-6.614,6.387-17.099,0-23.712 L143.492,221.863z"})))),Q||(Q=d.createElement("g",null)),ee||(ee=d.createElement("g",null)),te||(te=d.createElement("g",null)),re||(re=d.createElement("g",null)),ne||(ne=d.createElement("g",null)),ae||(ae=d.createElement("g",null)),se||(se=d.createElement("g",null)),ie||(ie=d.createElement("g",null)),oe||(oe=d.createElement("g",null)),ce||(ce=d.createElement("g",null)),le||(le=d.createElement("g",null)),ue||(ue=d.createElement("g",null)),de||(de=d.createElement("g",null)),he||(he=d.createElement("g",null)),pe||(pe=d.createElement("g",null)))}var bt,vt=d.forwardRef(pt),mt=(r.p,r(313),"available"),jt="reserved",ft="pending";function Ot(e){console.log("EventDetails render");var t=e.room,r=e.selectedTime,n=r.status;return Object(Ie.jsxs)("div",{className:"infoWrapper",children:[Object(Ie.jsx)("div",{className:"statusBar ".concat(n)}),Object(Ie.jsxs)("div",{className:"detailsWrapper",children:[Object(Ie.jsxs)("div",{className:"details",children:[Object(Ie.jsxs)("div",{className:"number",children:["Number: ",Object(Ie.jsx)("strong",{children:t.number})]}),Object(Ie.jsxs)("div",{className:"title",children:["Title: ",Object(Ie.jsx)("strong",{children:t.title})]}),Object(Ie.jsxs)("div",{className:"status",children:["Status: ",n]})]}),function(){switch(n){case ft:return Object(Ie.jsxs)("div",{className:"pengindEvent",children:[Object(Ie.jsx)("div",{children:"Event is comming soon"}),Object(Ie.jsxs)("div",{children:["Start in: ",Qe.dateFormatClient(r.event.date_start,"DD-MM-YYYY HH:mm")]}),Object(Ie.jsxs)("div",{children:["Ends in: ",Qe.dateFormatClient(r.event.date_end,"HH:mm")]})]});case jt:return Object(Ie.jsxs)("div",{className:"roomReserved",children:[Object(Ie.jsx)("div",{children:"Room is reserved"}),Object(Ie.jsxs)("div",{children:["Start in: ",Qe.dateFormatClient(r.event.date_start,"DD-MM-YYYY HH:mm")]}),Object(Ie.jsxs)("div",{children:["Ends in: ",Qe.dateFormatClient(r.event.date_end,"HH:mm")]})]});default:return""}}(),n===mt&&Object(Ie.jsx)("div",{className:"addEventWrapper",children:Object(Ie.jsx)(Ye.a,{onClick:e.onSubmit,variant:"contained",color:"secondary",size:"medium",fullWidth:!0,type:"submit",className:"addEvent",children:"Add event"})})]})]})}var gt,xt=Object(v.b)("userStore")(bt=function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(e){var n;return Object(O.a)(this,r),(n=t.call(this,e)).onDataChange=function(e){n.initDinamycProps(e),n.setState({selectedTime:n.timeLine[n.nowLabel]}),n.resetSelections(),n.setTimeLineLeft()},n.onRezise=function(){n.prevWindowWidth!==window.innerWidth&&(n.resizeTimeButtons(),n.setTimeLineLeft(),n.prevWindowWidth=window.innerWidth)},n.getTimeButtonWidth=function(){var e=n.timeLineRef.current.querySelector(".buttonsWrapper").offsetWidth,t=n.getVibisleTimeButtonsCount();return parseFloat(e/t)},n.resizeTimeButtons=function(){var e=n.getTimeButtonWidth();n.timeLineRef.current.querySelectorAll(".timebtn").forEach((function(t){t.style.minWidth=e+"px",t.style.maxWidth=e+"px",t.style.width=e+"px"}))},n.scroll=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=n.state.selectedTime.label,r=n.timeLineRef.current.querySelector(".timeButtons"),a=n.timeLineRef.current.querySelector(".buttonsWrapper"),s=n.timeLineRef.current.querySelector(".prev"),i=n.timeLineRef.current.querySelector(".next"),o=parseInt(r.style.left)||0,c=null,l=n.timeLineRef.current.querySelector('button[data-label="'.concat(t,'"]')),u=l.offsetWidth;c=e?o-u:o+u;var d=0,h=r.offsetWidth-a.offsetWidth;c>=d?(c=0,s.setAttribute("disabled",!0)):s.removeAttribute("disabled"),Math.abs(c)>=h?(c=-h,i.setAttribute("disabled",!0)):i.removeAttribute("disabled"),r.style.left=c+"px"},n.scrollToRight=function(){n.firstVisibleTimeIndex++,n.scroll()},n.scrollToLeft=function(){n.firstVisibleTimeIndex--,n.scroll(!1)},n.scrollSwitch=function(e){"left"===e?n.scrollToLeft():"right"===e&&n.scrollToRight()},n.handleScrollMouseDown=function(e,t){0===e.button&&(e.stopPropagation(),console.log("handleScrollMouseDown",t),t&&(n.mouseDownOnScrollInterval=setInterval((function(){n.isMouseHoldedOnScroll=!0,console.log("handleScrollMouseDown timer",t),n.scrollSwitch(t)}),300)))},n.handleScrollMouseUp=function(e,t){0===e.button&&(e.stopPropagation(),n.isMouseHoldedOnScroll||n.scrollSwitch(t),n.isMouseHoldedOnScroll=!1,clearInterval(n.mouseDownOnScrollInterval))},n.handleTimeClick=function(e){e.currentTarget.classList.toggle("selected");var t=e.currentTarget.dataset.label;n.setTimeData(e.currentTarget),n.changeTime(t)},n.setIntermediate=function(){n.timeLineRef.current.querySelectorAll(".timebtn").forEach((function(e,t){n.timeData.timeIndex1&&t>=n.timeData.timeIndex1&&n.timeData.timeIndex2&&t<=n.timeData.timeIndex2?e.classList.add("intermediate"):e.classList.remove("intermediate")}))},n.changeTime=function(e){n.setState({selectedTime:n.timeLine[e]})},n.handleAddEvent=function(){var e=[n.room._id];Object.values(n.timeData).filter((function(e){return e})).forEach((function(t){e.push(Je()("".concat(Je()(n.date).format("YYYY-MM-DD")," ").concat(n.timeLineData.items[t].label)).format("YYYY-MM-DDTHH:mm"))}));var t="/events/add/"+e.join("/");n.setState({redirectToAdd:t})},n.timeLineRef=h.a.createRef(),n.stepMinutes=n.props.stepMinutes,n.initDinamycProps(n.props),n.state={redirectToAdd:null,selectedTime:n.timeLine[n.nowLabel]},n.mouseDownOnScrollInterval=!1,n.isMouseHoldedOnScroll=!1,n.prevWindowWidth=null,n}return Object(g.a)(r,[{key:"initDinamycProps",value:function(e){this.date=e.date,this.room=e.room,this.timeLineData=e.timeLine,this.nowLabel=this.timeLineData.nowLabel,this.timeLine=this.prepTimeLine(this.room.events),this.initTimeData()}},{key:"setFirstVisibleIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||(e=this.timeLineData.nowIndex-1),e<0&&(e=0);var t=this.getVibisleTimeButtonsCount();e>this.timeLineData.items.length-t&&(e=this.timeLineData.items.length-t-1),this.firstVisibleTimeIndex=e}},{key:"initTimeData",value:function(){this.timeData={timeIndex1:NaN,timeIndex2:NaN}}},{key:"shouldComponentUpdate",value:function(e,t){if(this.props.room.events.length!==e.room.events.length){var r=this.props.room.events.map((function(e){return e._id})).join(",")!==e.room.events.map((function(e){return e._id})).join(",");return r&&this.onDataChange(e),r}return Je()(e.date).isValid()&&this.props.date!==e.date?(this.onDataChange(e),!0):(this.state.selectedTime.label,t.selectedTime.label,!0)}},{key:"resetSelections",value:function(){this.setIntermediate();var e=this.timeLineRef.current.querySelectorAll(".selected, .postData");e&&e.forEach((function(e){e.classList.remove("selected"),e.classList.remove("postData")}))}},{key:"componentDidMount",value:function(){this.setFirstVisibleIndex(),this.resizeTimeButtons(),this.setTimeLineLeft();var e=this.timeLineRef.current.querySelector(".buttonsWrapper");setTimeout((function(){e.classList.remove("loading")}),0),this.prevWindowWidth=window.innerWidth,window.addEventListener("resize",this.onRezise)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onRezise)}},{key:"getVibisleTimeButtonsCount",value:function(){var e=this.timeLineRef.current.querySelector(".buttonsWrapper").offsetWidth;return 1+parseInt(e/100)}},{key:"setTimeLineLeft",value:function(){var e=this,t=this.timeLineRef.current.querySelector(".timeButtons"),r=0;if(this.firstVisibleTimeIndex>0){var n=this.timeLineRef.current.querySelectorAll(".timebtn");[].some.call(n,(function(t,n){return r+=t.offsetWidth,e.firstVisibleTimeIndex<=n}))}t.style.left=-r+"px"}},{key:"prepTimeLine",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r={};return this.timeLineData.items.forEach((function(n){var a=mt,s=null;t.length&&t.some((function(t){return a=e.getStatus(n.date,t),s=t,mt!==a}));var i=e.nowLabel===n.label;r[n.label]={label:n.label,date:n.date,event:s,status:a,className:i?"selected":"",disabled:a!==mt}})),r}},{key:"setTimeData",value:function(e){var t=e.dataset.status,r=e.dataset.index;if(t===mt){if(r===this.timeData.timeIndex1)this.timeData.timeIndex1=NaN,console.log("index === index1"),e.classList.remove("postData");else if(r===this.timeData.timeIndex2)this.timeData.timeIndex2=NaN,console.log("index === index2"),e.classList.remove("postData");else if(isNaN(this.timeData.timeIndex1))this.timeData.timeIndex1=r,e.classList.add("postData");else if(isNaN(this.timeData.timeIndex2))this.timeData.timeIndex2=r,e.classList.add("postData");else{var n=null;r<this.timeData.timeIndex1?(n=this.timeLineRef.current.querySelector('.timebtn[data-index="'.concat(this.timeData.timeIndex1,'"]')),this.timeData.timeIndex1=r):r>this.timeData.timeIndex1&&(n=this.timeLineRef.current.querySelector('.timebtn[data-index="'.concat(this.timeData.timeIndex2,'"]')),this.timeData.timeIndex2=r),n.classList.remove("postData"),e.classList.add("postData")}this.setIntermediate()}}},{key:"isReservedByMe",value:function(e){return!!Math.round(Math.random(0,1))}},{key:"getStatus",value:function(e,t){var r=Je()(e).second(0).millisecond(0),n=Je()(t.date_start).second(0).millisecond(0),a=Je()(t.date_end).second(0).millisecond(0);return r>=n&&r<a?jt:r>=n.subtract(this.stepMinutes-1,"minute")&&r<a?ft:mt}},{key:"render",value:function(){return this.state.redirectToAdd?Object(Ie.jsx)(Le.a,{to:this.state.redirectToAdd}):(console.info("  render RoomEvents room:",this.room.number),Object(Ie.jsx)("div",{className:"roomEvents mdc-theme--primary-bg",children:Object(Ie.jsxs)("div",{className:"baseWrapper",children:[Object(Ie.jsx)(Ot,{onSubmit:this.handleAddEvent,room:this.room,selectedTime:this.state.selectedTime}),this.TimeLine()]})}))}},{key:"TimeLine",value:function(){var e=this;return Object(Ie.jsxs)("div",{ref:this.timeLineRef,className:"timeline",children:[Object(Ie.jsx)(Ye.a,{"data-direction":"left",className:"prev",onMouseDown:function(t){e.handleScrollMouseDown(t,"left")},onMouseUp:function(t){e.handleScrollMouseUp(t,"left")},children:Object(Ie.jsx)(vt,{})}),Object(Ie.jsx)("div",{className:"buttonsWrapper loading",children:Object(Ie.jsx)("div",{className:"timeButtons",children:this.timeLineData.items.map((function(t,r){return Object(Ie.jsx)(Ye.a,Object(u.a)(Object(u.a)({},function(t,r){var n=t.label,a=e.timeLine[n].status,s="timebtn ".concat(a," ").concat(e.timeLine[n].className);return{id:"".concat(e.room.number,"-scrollable-auto-tab-").concat(r),"aria-controls":"".concat(e.room.number,"-scrollable-auto-tab-").concat(r),"aria-label":n,key:r,"data-label":n,"data-index":r,"data-status":a,label:t.label,className:s,onClick:e.handleTimeClick}}(t,r)),{},{children:t.label}))}))})}),Object(Ie.jsx)(Ye.a,{"data-direction":"right",className:"next",onMouseDown:function(t){e.handleScrollMouseDown(t,"right")},onMouseUp:function(t){e.handleScrollMouseUp(t,"right")},children:Object(Ie.jsx)(vt,{})})]})}}]),r}(h.a.Component))||bt,yt=function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(){return Object(O.a)(this,r),t.apply(this,arguments)}return Object(g.a)(r,[{key:"render",value:function(){return Object(Ie.jsx)("div",{className:"noRooms",children:Object(Ie.jsx)("h2",{className:"text-center",children:"There are no conference rooms yet"})})}}]),r}(h.a.Component),St=new(function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(){return Object(O.a)(this,r),t.apply(this,arguments)}return Object(g.a)(r,[{key:"list",value:function(){return this.axios.get("/rooms/list")}},{key:"getRoomsWithEventsOfDay",value:function(e){return this.axios.get("/rooms/roomsWithEventsOfDay/"+e)}}]),r}(be)),Et=(r(314),Object(u.a)(Object(u.a)({},ct),{},{NO_ROOMS:"NO_ROOMS",UPDATE:"UPDATE"})),kt=function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(e){var n;return Object(O.a)(this,r),(n=t.call(this,e)).filter=Object(at.a)((function(e,t){var r="title";return n.state.roomsFilterValue==(0^n.state.roomsFilterValue)&&(r="number"),n.state.rooms.filter((function(e){var t=new RegExp(n.state.roomsFilterValue,"i");return-1!==e[r].toString().search(t)}))})),n.applyRoomFilterValue=function(e){n.setState({roomsFilterValue:e})},n.handleRoomsFilterChange=function(e){n.setState({roomsFilterValue:e.target.value})},n.handleDateChange=function(){var e=Object(De.a)(we.a.mark((function e(t){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({selectedDate:t,renderState:Et.UPDATE}),n.loadRoomsWithEventsOfDay(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.stepMinutes=30,n.timeLineLabelFormat="HH:mm",n.state=Object(u.a)(Object(u.a)({},n.state),{},{selectedDate:Je()(),roomsFilterValue:""}),n.prevRoomList=null,n.roomEventsRef=h.a.createRef(),n}return Object(g.a)(r,[{key:"componentDidMount",value:function(){var e=Object(De.a)(we.a.mark((function e(){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loadRoomsWithEventsOfDay();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadRoomsWithEventsOfDay",value:function(){var e=Object(De.a)(we.a.mark((function e(){var t,r,n,a=this,s=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.length>0&&void 0!==s[0]?s[0]:null,this.setState({isLoading:!0}),r=t||this.state.selectedDate,n={},St.getRoomsWithEventsOfDay(r).then((function(e){var t=e.response.getApiData();if(null===t.data||"object"!==typeof t.data)return console.log("loadRoomsWithEvents->Invalid rooms data. Expected data object"),a.getServerErrorState("Invalid data from server");if(!t.data.length)return{renderState:Et.NO_ROOMS};var r={rooms:t.data,renderState:Et.COMMON};n=r})).catch((function(e){e.error;e.response.getApiCode()===xe.ROOMS.INVALID_DATE?(console.log("Invalid date"),n=a.getServerErrorState("Invalid date")):(console.log("Invalid data from server"),n=a.getServerErrorState("Invalid data from server"))})).finally((function(){a.setState(Object(u.a)({isLoading:!1},n))}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTimeLine",value:function(){var e,t=60/this.stepMinutes*24,r=Je()(this.state.selectedDate),n=Je()(),a=Je()(r).hour(n.hour()).minute(n.minute()).second(0).millisecond(0),s=null;e=(a=23===a.hour()&&a.minute()>30?a.minute(30):a.minute(this.stepMinutes*Math.ceil(a.minute()/this.stepMinutes))).format(this.timeLineLabelFormat);for(var i=Je()(a).startOf("day"),o=[],c=0;c<t;c++){var l=i.add(c*this.stepMinutes,"minute"),u=l.format(this.timeLineLabelFormat);u===e&&(s=c),o.push({label:u,date:l})}return{items:o,nowLabel:e,nowIndex:s}}},{key:"render",value:function(){var e=this;console.info(" Events page render",this.state.renderState);var t=null;switch(this.state.renderState){case Et.FAILURE:t=Object(Ie.jsx)(tt,{data:this.state.serviceMessage});break;case Et.INIT:t=Object(Ie.jsx)(_e,{});break;case Et.UPDATE:t=this.prevRoomList;break;case Et.NO_ROOMS:t=Object(Ie.jsx)(yt,{});break;case Et.COMMON:this.timeLine=this.getTimeLine();var r=null;r=this.state.roomsFilterValue.length?this.filter(this.state.rooms,this.state.roomsFilterValue):this.state.rooms;var n={xs:12,sm:12,md:6,lg:6,xl:6},a=4;1===this.state.rooms.length&&(n={xs:12,sm:12,md:12,lg:12,xl:12},a=0);t=Object(Ie.jsxs)(Ie.Fragment,{children:[Object(Ie.jsxs)(Be.a,{container:!0,className:"filter",justify:"center",spacing:4,children:[Object(Ie.jsx)(Be.a,{item:!0,xs:6,children:Object(Ie.jsx)(wt,{applyFilter:this.applyRoomFilterValue,handleChange:this.handleRoomsFilterChange,value:this.state.roomsFilterValue})}),Object(Ie.jsx)(Be.a,{item:!0,xs:6,children:Object(Ie.jsx)(Dt,{selectedDate:this.state.selectedDate,applyDate:this.handleDateChange})})]}),!r.length&&Object(Ie.jsx)("div",{className:"filterEmptyResult",children:Object(Ie.jsx)("h2",{children:"No rooms founded"})}),Object(Ie.jsx)(Be.a,{container:!0,className:"roomEvents roomsLen".concat(r.length),spacing:a,ref:this.roomEventsRef,children:function(t){var r=[];return t.forEach((function(t){r.push(Object(Ie.jsx)(Be.a,Object(u.a)(Object(u.a)({item:!0},n),{},{children:Object(Ie.jsx)(xt,{date:e.state.selectedDate,stepMinutes:e.stepMinutes,timeLine:e.timeLine,room:t})}),t._id))})),r}(r)})]}),this.prevRoomList=t;break;default:t=Object(Ie.jsx)(rt,{})}return Object(Ie.jsx)(Fe.a,{maxWidth:"md",className:"events page ".concat(String(this.state.renderState).toLowerCase()),children:t})}}]),r}(ut),wt=function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(e){var n;return Object(O.a)(this,r),(n=t.call(this,e)).handleChange=function(e){n.setState({value:e.target.value}),clearTimeout(n.timeout),setTimeout((function(){n.applyFilter(n.state.value)}),400)},n.state={value:e.value},n.timeout=null,n.applyFilter=e.applyFilter,n}return Object(g.a)(r,[{key:"render",value:function(){return Object(Ie.jsx)("div",{className:"roomsFilterValueWrapper",children:Object(Ie.jsx)(He.a,{label:"Room",inputProps:{type:"text"},InputLabelProps:{shrink:!0},id:"roomsFilterValue",onChange:this.handleChange,value:this.state.value})})}}]),r}(h.a.Component),Dt=function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(e){var n;return Object(O.a)(this,r),(n=t.call(this,e)).handleChange=function(e){n.setState({selectedDate:e}),setTimeout((function(){clearTimeout(n.timeout),n.applyDate(n.state.selectedDate)}),500)},n.state={selectedDate:e.selectedDate},n.timeout=null,n.applyDate=e.applyDate,n}return Object(g.a)(r,[{key:"render",value:function(){return Object(Ie.jsx)(it.a,{utils:st.a,children:Object(Ie.jsx)(ot.a,{id:"date-dialog",label:"Date",format:"YYYY/MM/DD",InputLabelProps:{shrink:!0},value:this.state.selectedDate,onChange:this.handleChange,KeyboardButtonProps:{"aria-label":"change date"}})})}}]),r}(h.a.Component),Lt=r(57),Nt=Object(u.a)(Object(u.a)({},ct),{},{NO_ROOMS:"NO_ROOMS",SAVED:"SAVED"}),It=function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(){var e;Object(O.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).handleDateStartChange=function(t){var r=e.state.errors,n=e.validateDateStart(t);!0===n?delete r.date_start:r.date_start=n,e.setState({event:Object(u.a)(Object(u.a)({},e.state.event),{},{date_start:t})})},e.handleDateEndChange=function(t){var r=e.state.errors,n=e.validateDateEnd(t);!0===n?delete r.date_end:r.date_end=n,e.setState({event:Object(u.a)(Object(u.a)({},e.state.event),{},{date_end:t})})},e.handleRoomChange=function(t){var r=e.state.event;r.room._id=t.target.value,e.setState({event:r})},e.handleTitleChange=function(t){var r=e.state.errors,n=e.validateTitle(t.target.value);!0===n?delete r.title:r.title=n,e.setState({event:Object(u.a)(Object(u.a)({},e.state.event),{},{title:t.target.value,errors:r})})},e.handleDescriptionChange=function(t){e.setState({event:Object(u.a)(Object(u.a)({},e.state.event),{},{description:t.target.value})})},e.validateDateStart=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new Date(e),r=!isNaN(t.getTime());return!!r||{message:"Invalid date"}},e.validateDateEnd=function(t){var r=new Date(e.state.event.date_start),n=new Date(t);return console.log("validateDateEnd"),console.log(r,n),isNaN(n.getTime())?{message:"Invalid date"}:!(r>=n)||{message:"should be future"}},e.validateTitle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.length>2;return!!t||{message:"Less than 3 symbols"}},e.validate=function(){var t={},r=null;return!0!==(r=e.validateDateStart(e.state.event.date_start))&&(t.date_start=r),!0!==(r=e.validateDateEnd(e.state.event.date_end))&&(t.date_end=r),!0!==(r=e.validateTitle(e.state.event.title))&&(t.title=r),!Object.keys(t).length||t},e}return Object(g.a)(r,[{key:"getPostData",value:function(){var e=Qe.dateFormat(this.state.event.date_start),t=Qe.dateFormat(this.state.event.date_end);return{room:this.state.event.room._id,title:this.state.event.title,description:this.state.event.description,date_start:e,date_end:t}}},{key:"loadRoomList",value:function(){var e=Object(De.a)(we.a.mark((function e(){var t,r,n,a,s,i=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(i.length>0&&void 0!==i[0])||i[0],e.next=3,St.list();case 3:if(!(r=e.sent).error){e.next=10;break}return r.error instanceof M&&console.error("ApiDataTypeError"),console.log("Invalid data from server"),e.abrupt("return",this.getServerErrorState("Invalid data type from server"));case 10:if(n=r.response.getApiData(),!1!==Array.isArray(n.rooms)){e.next=14;break}return console.log("Invalid rooms data. Expected rooms[]"),e.abrupt("return",this.getServerErrorState("Invalid data from server"));case 14:return(a={}).serviceMessage="",a.roomsList=n.rooms,a.renderState=Nt.COMMON,n.rooms.length?t&&(s=n.rooms[0]._id,console.info("state.event",this.state.event),a.event=Object(u.a)(Object(u.a)({},this.state.event),{},{room:{_id:s}}),console.info("stateProps",a)):a.renderState=Nt.NO_ROOMS,e.abrupt("return",a);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadEventDetails",value:function(){var e=Object(De.a)(we.a.mark((function e(){var t,r,n,a;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.getEvent(this.state.event._id);case 2:if(t=e.sent,r=t.response.getApiData(),n=t.response.getApiCode(),!t.error){e.next=28;break}if(!(t.error instanceof M)){e.next=11;break}return console.error("ApiDataTypeError"),e.abrupt("return",this.getServerErrorState("Invalid data type from server"));case 11:if(404!==t.response.status){e.next=14;break}return console.log("Event not found"),e.abrupt("return",this.getServerErrorState("Event not found"));case 14:if(n!==xe.EVENTS.DETAILS_ID_REQUIRED){e.next=19;break}return console.log("eventId is required"),e.abrupt("return",this.getServerErrorState("Event Id is required"));case 19:if(n!==xe.EVENTS.DETAILS_ID_INVALID){e.next=24;break}return console.log("Invalid eventId"),e.abrupt("return",this.getServerErrorState("Invalid event Id"));case 24:return console.log("Invalid data from server"),e.abrupt("return",this.getServerErrorState("Invalid data from server"));case 26:e.next=41;break;case 28:if(console.info(r.event.user._id),"object"===typeof r.event){e.next=34;break}return console.log("Invalid data. Expected object event"),e.abrupt("return",this.getServerErrorState("Invalid data from serverq"));case 34:if(r.event.user._id===this.props.userStore.user.id){e.next=39;break}return console.log("owner error",this.props.userStore.user.id,r.event.user._id),e.abrupt("return",this.getServerErrorState("Permission denined!"));case 39:return a={serviceMessage:"",renderState:Nt.COMMON,event:r.event},e.abrupt("return",a);case 41:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(ut),Tt=r(345),_t=r(368),Ct=r(369),Mt=r(370),Rt=(r(315),function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(e){var n;return Object(O.a)(this,r),(n=t.call(this,e)).submitBtnText=n.props.action,n}return Object(g.a)(r,[{key:"render",value:function(){return console.info("EventForm render"),console.log(this.props),console.log("roomId",this.props.event.room._id),Object(Ie.jsxs)(Be.a,{container:!0,spacing:3,className:"eventForm",children:[Object(Ie.jsx)(Be.a,{item:!0,xs:4,children:Object(Ie.jsxs)(We.a,{fullWidth:!0,error:!!this.props.errors&&!!this.props.errors.room,children:[Object(Ie.jsx)(Ue.a,{children:"Rooms list"}),Object(Ie.jsx)(Tt.a,{onChange:this.props.handleRoomChange,value:this.props.event.room._id,children:Array.isArray(this.props.roomsList)&&this.props.roomsList.map((function(e,t){return Object(Ie.jsx)(_t.a,{value:e._id,children:e.number},e._id)}))})]})}),Object(Ie.jsxs)(it.a,{utils:st.a,children:[Object(Ie.jsx)(Be.a,{item:!0,xs:4,children:Object(Ie.jsxs)(We.a,{error:!!this.props.errors&&!!this.props.errors.date_start,children:[Object(Ie.jsx)(Ue.a,{children:"Start time"}),Object(Ie.jsx)(Ct.a,{value:this.props.event.date_start,ampm:!1,minutesStep:5,onChange:this.props.handleDateStartChange})]})}),Object(Ie.jsx)(Be.a,{item:!0,xs:4,children:Object(Ie.jsxs)(We.a,{error:!!this.props.errors&&!!this.props.errors.date_end,children:[Object(Ie.jsx)(Ue.a,{children:"Time end"}),Object(Ie.jsx)(Mt.a,{value:this.props.event.date_end,onChange:this.props.handleDateEndChange,minutesStep:5,ampm:!1})]})})]}),Object(Ie.jsx)(Be.a,{item:!0,xs:4,children:Object(Ie.jsxs)(We.a,{error:!!this.props.errors&&!!this.props.errors.title,children:[Object(Ie.jsx)(Ue.a,{children:"Title"}),Object(Ie.jsx)(He.a,{value:this.props.event.title,onChange:this.props.handleTitleChange})]})}),Object(Ie.jsx)(Be.a,{item:!0,xs:8,children:Object(Ie.jsxs)(We.a,{fullWidth:!0,error:!!this.props.errors&&!!this.props.errors.description,children:[Object(Ie.jsx)(Ue.a,{children:"Description"}),Object(Ie.jsx)(He.a,{multiline:!0,fullWidth:!0,value:this.props.event.description,onChange:this.props.handleDescriptionChange})]})}),this.props.alert&&Object(Ie.jsx)(Be.a,{item:!0,xs:12,children:Object(Ie.jsx)(et.a,{severity:this.props.alert.severity,children:this.props.alert.message})}),this.props.serviceMessage&&Object(Ie.jsx)(Be.a,{item:!0,className:"qq",xs:12,children:Object(Ie.jsxs)(et.a,{severity:"error",children:[Object(Ie.jsx)("div",{children:this.props.serviceMessage}),Array.isArray(this.props.crossedEvents)&&this.props.crossedEvents.map((function(e,t){return Object(Ie.jsxs)("div",{className:"crossedEvents",children:[Je()(e.date_start).format("DD-MM-YY HH:mm"),"-",Je()(e.date_end).format("HH:mm"),"\xa0 reserved by ",Object(Ie.jsx)(Ce.a,{component:m.b,variant:"inherit",to:"/@".concat(e.user.name),children:e.user.name})]},t)}))]})}),Object(Ie.jsx)(Be.a,{item:!0,xs:12,className:"bayanNearButton",children:this.props.isLoading&&Object(Ie.jsx)(_e,{})}),Object(Ie.jsx)(Be.a,{item:!0,xs:12,className:"btnContainer",children:Object(Ie.jsx)(Ye.a,{disabled:this.props.isLoading,className:"submit",variant:"contained",fullWidth:!0,type:"button",color:"secondary",onClick:this.props.handleSubmit,children:this.props.action})})]})}}]),r}(h.a.Component)),At=r(371),Pt=function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(){return Object(O.a)(this,r),t.apply(this,arguments)}return Object(g.a)(r,[{key:"render",value:function(){return Object(Ie.jsxs)(Be.a,{container:!0,spacing:3,children:[Object(Ie.jsx)(Be.a,{item:!0,xs:4,children:Object(Ie.jsx)(At.a,{height:"4rem"})}),Object(Ie.jsx)(Be.a,{item:!0,xs:4,children:Object(Ie.jsx)(At.a,{height:"4rem"})}),Object(Ie.jsx)(Be.a,{item:!0,xs:4,children:Object(Ie.jsx)(At.a,{height:"4rem"})}),Object(Ie.jsx)(Be.a,{item:!0,xs:4,children:Object(Ie.jsx)(At.a,{height:"4rem"})}),Object(Ie.jsx)(Be.a,{item:!0,xs:8,children:Object(Ie.jsx)(At.a,{height:"4rem"})}),Object(Ie.jsx)(Be.a,{item:!0,xs:12,children:Object(Ie.jsx)(At.a,{height:"4rem"})})]})}}]),r}(h.a.Component);r(316);function Vt(e){return Object(Ie.jsxs)("div",{className:"created text-center",children:[Object(Ie.jsxs)("h2",{children:["Event created successfuly in room #",e.event.room.number,"."]}),Object(Ie.jsxs)("p",{children:["Start at: ",Qe.dateFormat(e.event.date_start,"DD-MM-YYYY HH:mm")]}),Object(Ie.jsxs)("p",{children:["End at: ",Qe.dateFormat(e.event.date_end,"DD-MM-YYYY HH:mm")]}),Object(Ie.jsxs)("p",{children:["You can ",Object(Ie.jsx)(Ce.a,{component:m.b,variant:"inherit",to:"/events/change/".concat(e.event._id),children:"change"}),"\xa0or\xa0",Object(Ie.jsx)(Ce.a,{component:m.b,variant:"inherit",to:"/events/delete/".concat(e.event._id),children:"delete"})]})]})}var Ft,Wt,Ht=Object(Le.g)(gt=function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(e){var n;return Object(O.a)(this,r),(n=t.call(this,e)).state=Object(u.a)(Object(u.a)({},n.state),{},{roomsList:[],createdEvent:null,crossedEvents:null}),n.initEventState(),n.handleAddEvent=n.handleAddEvent.bind(Object(Lt.a)(n)),n}return Object(g.a)(r,[{key:"initEventState",value:function(){var e=new Date;e.setMinutes(5*Math.round(e.getMinutes()/5));var t=new $e({date_start:e,date_end:Je()(e).add(30,"minute")});this.props.match.params.roomId?this.state.event=this.getEventFromUrl(t):this.state.event=t}},{key:"getEventFromUrl",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.props.match.params.roomId,a=(null===(e=this.props.match.params)||void 0===e?void 0:e.from)?Je()(this.props.match.params.from):void 0,s=(null===(t=this.props.match.params)||void 0===t?void 0:t.to)?Je()(this.props.match.params.to):void 0;return r.room={_id:n},a&&a.isValid()&&(r.date_start=a,r.date_end=s&&s.isValid()?s:a.add(30,"minute")),r}},{key:"componentDidMount",value:function(){var e=Object(De.a)(we.a.mark((function e(){var t,r,n;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!1}),r=!(null===(t=this.state.event.room)||void 0===t?void 0:t._id),e.next=4,this.loadRoomList(r);case 4:n=e.sent,this.setState(Object(u.a)(Object(u.a)({},n),{},{isLoading:!1}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addEvent",value:function(){var e=Object(De.a)(we.a.mark((function e(){var t,r,n,a,s,i,o,c,l,u;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getPostData(),console.info("addEvent with:",t),e.next=4,ve.addEvent(t);case 4:if(!(r=e.sent).error){e.next=43;break}if(n=r.response.getApiCode(),a=r.response.getApiData(),s=r.response.getApiMessage(),n!==xe.EVENTS.VALIDATION){e.next=15;break}return i=r.response.getErrorFields(),console.log("AddEvent->Validation error",i),e.abrupt("return",this.getValidationErrorState("Validation error",i));case 15:if(n!==xe.EVENTS.CROSS_DATES){e.next=26;break}if(o=a.events,!1!==Array.isArray(o)){e.next=20;break}return console.log("Expected array of events from database",s),e.abrupt("return",this.getServerErrorState("Invalid data from server"));case 20:return c={date_start:!0,date_end:!0},"Date is crossed with enother events",console.log("AddEvent->Validation error",c),e.abrupt("return",this.getValidationErrorState("Date is crossed with enother events",c,{crossedEvents:o}));case 26:if(n!==xe.EVENTS.ROOM_NOT_EXISTS){e.next=32;break}return"Room does not exist. Please try another room",console.log("Room does not exists",s),e.abrupt("return",this.getValidationErrorState("Room does not exist. Please try another room"));case 32:if(n!==xe.EVENTS.ROOM_NOT_ACTIVE){e.next=38;break}return"Room is closed. Please try another room",console.log("Room not active",s),e.abrupt("return",this.getValidationErrorState("Room is closed. Please try another room"));case 38:return r.error instanceof M&&console.error("addEvent->ApiDataTypeError"),console.log("AddEvent->Invalid data from server",r.error),e.abrupt("return",this.getServerErrorState("Invalid data from server"));case 41:e.next=54;break;case 43:if(null!==(l=r.response.getApiData()).event&&"object"===typeof l.event){e.next=48;break}return console.log("addEvent>Invalid rooms data. Expected event object"),console.log(l),e.abrupt("return",this.getServerErrorState("Invalid data from server"));case 48:if(l.event._id){e.next=52;break}return console.log("addEvent>Invalid rooms data. Expected event id"),console.log(l),e.abrupt("return",this.getServerErrorState("Invalid data from server"));case 52:return u={renderState:Nt.SAVED,createdEvent:l.event},e.abrupt("return",u);case 54:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleAddEvent",value:function(){var e=Object(De.a)(we.a.mark((function e(){var t,r;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0===(t=this.validate())){e.next=4;break}return this.setState({errors:t}),e.abrupt("return");case 4:return this.setState({isLoading:!0,errors:{}}),e.next=7,this.addEvent();case 7:r=e.sent,this.setState(Object(u.a)({isLoading:!1},r));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){console.info("render",this.state.renderState);var e=null;switch(this.state.renderState){case Nt.SAVED:e=Object(Ie.jsx)(Vt,{event:this.state.createdEvent});break;case Nt.NO_ROOMS:e=Object(Ie.jsx)(yt,{});break;case Nt.FAILURE:e=Object(Ie.jsx)(tt,{data:this.state.serviceMessage});break;case Nt.INIT:e=Object(Ie.jsx)(Pt,{});break;case Nt.COMMON:e=Object(Ie.jsxs)(Ie.Fragment,{children:[Object(Ie.jsx)("h2",{className:"text-center",children:"Add event"}),Object(Ie.jsx)(Rt,{isLoading:this.state.isLoading,errors:this.state.errors,serviceMessage:this.state.serviceMessage,roomsList:this.state.roomsList,crossedEvents:this.state.crossedEvents,action:"add",renderState:this.state.renderState,event:this.state.event,handleRoomChange:this.handleRoomChange,handleDateStartChange:this.handleDateStartChange,handleDateEndChange:this.handleDateEndChange,handleTitleChange:this.handleTitleChange,handleDescriptionChange:this.handleDescriptionChange,handleSubmit:this.handleAddEvent})]});break;default:e=Object(Ie.jsx)(rt,{data:"Application error"})}return Object(Ie.jsx)(Fe.a,{maxWidth:"md",className:"addEvent page ".concat(String(this.state.renderState).toLowerCase()),children:e})}}]),r}(It))||gt,Ut=(r(317),Object(v.b)("userStore")(Ft=function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(e){var n;Object(O.a)(this,r),(n=t.call(this,e)).handleSubmit=Object(De.a)(we.a.mark((function e(){var t,r;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0===(t=n.validate())){e.next=4;break}return n.setState({errors:t}),e.abrupt("return");case 4:return n.setState({isLoading:!0,errors:{},changed:!1,serviceMessage:"",renderState:Nt.COMMON}),e.next=7,n.changeEvent();case 7:r=e.sent,n.setState(Object(u.a)({isLoading:!1},r));case 9:case"end":return e.stop()}}),e)})));var a=n.props.match.params.id,s=new $e({_id:a});return n.state=Object(u.a)(Object(u.a)({},n.state),{},{event:s,roomsList:[],changed:!1,crossedEvents:null}),n}return Object(g.a)(r,[{key:"componentDidMount",value:function(){var e=Object(De.a)(we.a.mark((function e(){var t,r;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.next=3,this.loadRoomList(!1);case 3:if(!("renderState"in(t=e.sent))||t.renderState===Nt.COMMON){e.next=7;break}return this.setState(Object(u.a)(Object(u.a)({},t),{},{isLoading:!1})),e.abrupt("return");case 7:return e.next=9,this.loadEventDetails();case 9:if(!("renderState"in(r=e.sent))||r.renderState===Nt.COMMON){e.next=15;break}return this.setState(Object(u.a)(Object(u.a)({},r),{},{isLoading:!1})),e.abrupt("return");case 15:this.setState(Object(u.a)(Object(u.a)(Object(u.a)({},t),r),{},{isLoading:!1}));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"changeEvent",value:function(){var e=Object(De.a)(we.a.mark((function e(){var t,r,n,a,s,i,o,c,l;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getPostData(),console.info("changeEvent with:",t),e.next=4,ve.changeEvent(this.state.event._id,t);case 4:if(!(r=e.sent).error){e.next=48;break}if(n=r.response.getApiCode(),a=r.response.getApiData(),s=r.response.getApiMessage(),n!==xe.EVENTS.NOT_BELONG_TO_YOU){e.next=14;break}return console.log("permission error",s),e.abrupt("return",this.getServerErrorState("Permission denined!"));case 14:if(n!==xe.EVENTS.VALIDATION){e.next=20;break}return i=r.response.getErrorFields(),console.log("changeEvent->Validation error",i),e.abrupt("return",this.getValidationErrorState("Validation error",i));case 20:if(n!==xe.EVENTS.CROSS_DATES){e.next=31;break}if(o=a.events,!1!==Array.isArray(o)){e.next=25;break}return console.log("Expected array of events from database",s),e.abrupt("return",this.getServerErrorState("Invalid data from server"));case 25:c={date_start:!0,date_end:!0},"Date is crossed with enother events",console.log("changeEvent->Validation error",c),this.getValidationErrorState("Date is crossed with enother events",c,{crossedEvents:o}),e.next=46;break;case 31:if(n!==xe.EVENTS.ROOM_NOT_EXISTS){e.next=37;break}return"Room does not exist. Please try another room",console.log("Room does not exists",s),e.abrupt("return",this.getValidationErrorState("Room does not exist. Please try another room"));case 37:if(n!==xe.EVENTS.ROOM_NOT_ACTIVE){e.next=43;break}return"Room is closed. Please try another room",console.log("Room not active",s),e.abrupt("return",this.getValidationErrorState("Room is closed. Please try another room"));case 43:return r.error instanceof M&&console.error("changeEvent->ApiDataTypeError"),console.log("changeEvent->Invalid data from server",r.error),e.abrupt("return",this.getServerErrorState("Invalid data from server"));case 46:e.next=58;break;case 48:if(null!==(l=r.response.getApiData()).event&&"object"===typeof l.event){e.next=53;break}return console.log("changeEvent->Invalid rooms data. Expected event object"),console.log(l),e.abrupt("return",this.getServerErrorState("Invalid data from server"));case 53:if(l.event._id){e.next=57;break}return console.log("changeEvent>Invalid rooms data. Expected event id"),console.log(l),e.abrupt("return",this.getServerErrorState("Invalid data from server"));case 57:return e.abrupt("return",{changedEvent:l.event,renderState:Nt.SAVED});case 58:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){console.info("render",this.state.renderState);var e=null,t=null;switch(this.state.renderState===Nt.SAVED&&(e={message:"Event saved",severity:"success"}),this.state.renderState){case Nt.NO_ROOMS:t=Object(Ie.jsx)(yt,{});break;case Nt.FAILURE:t=Object(Ie.jsx)(tt,{data:this.state.serviceMessage});break;case Nt.INIT:t=Object(Ie.jsxs)(Ie.Fragment,{children:[Object(Ie.jsx)("h2",{className:"text-center",children:"Change event"}),Object(Ie.jsx)(Pt,{})]});break;case Nt.SAVED:case Nt.COMMON:t=Object(Ie.jsxs)(Ie.Fragment,{children:[Object(Ie.jsx)("h2",{className:"text-center",children:"Change event"}),Object(Ie.jsx)(Rt,{isLoading:this.state.isLoading,errors:this.state.errors,serviceMessage:this.state.serviceMessage,roomsList:this.state.roomsList,crossedEvents:this.state.crossedEvents,action:"change",componentStatus:this.state.componentStatus,event:this.state.event,alert:e,handleRoomChange:this.handleRoomChange,handleStartDateTimeChange:this.handleStartDateTimeChange,handleDateEndChange:this.handleDateEndChange,handleTitleChange:this.handleTitleChange,handleDescriptionChange:this.handleDescriptionChange,handleSubmit:this.handleSubmit})]});break;default:t=Object(Ie.jsx)(rt,{data:"Application error"})}return Object(Ie.jsx)(Fe.a,{maxWidth:"md",className:"addEvent page ".concat(String(this.state.renderState).toLowerCase()),children:t})}}]),r}(It))||Ft);r(318);function Yt(e){return Object(Ie.jsxs)(Ie.Fragment,{children:[Object(Ie.jsx)("h2",{className:"text-center",children:"Are you sure to delete event?"}),Object(Ie.jsxs)(Be.a,{className:"eventDetails",children:[Object(Ie.jsxs)("p",{children:[Object(Ie.jsx)("b",{children:"Room#:"})," ",e.event.room.number]}),Object(Ie.jsxs)("p",{children:[Object(Ie.jsx)("b",{children:"Title:"})," ",e.event.title]}),Object(Ie.jsxs)("p",{children:[Object(Ie.jsx)("b",{children:"Description:"})," ",e.event.description]}),Object(Ie.jsxs)("p",{children:[Object(Ie.jsx)("b",{children:"Date start:"})," ",Je()(e.event.date_start).format("DD-MM-YYYY HH:mm")]}),Object(Ie.jsxs)("p",{children:[Object(Ie.jsx)("b",{children:"Date end:"})," ",Je()(e.event.date_end).format("DD-MM-YYYY HH:mm")]})]}),Object(Ie.jsxs)(Be.a,{container:!0,className:"btnContainer",children:[Object(Ie.jsx)(Ye.a,{disabled:e.isLoading,className:"btnAddEvent",variant:"contained",fullWidth:!0,type:"button",color:"secondary",onClick:e.handleDeleteEvent,children:"Delete event"}),e.isLoading&&Object(Ie.jsx)(_e,{})]})]})}function qt(e){return Object(Ie.jsx)(Ie.Fragment,{children:Object(Ie.jsxs)("div",{className:"created text-center",children:[Object(Ie.jsx)("h2",{children:"Event deleted successfuly."}),Object(Ie.jsx)(Be.a,{container:!0,className:"btnContainer",children:Object(Ie.jsx)(Ye.a,{component:m.b,to:"/events/add",variant:"contained",color:"secondary",fullWidth:!0,type:"submit",children:"Add event"})})]})})}var zt=Object(v.b)("userStore")(Wt=Object(Le.g)(Wt=function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(e){var n;Object(O.a)(this,r),(n=t.call(this,e)).deleteEvent=Object(De.a)(we.a.mark((function e(){var t,r,a;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.deleteEvent(n.state.event._id);case 2:if(t=e.sent,r=t.response.getApiMessage(),a=t.response.getApiCode(),!t.error){e.next=15;break}if(a!==xe.EVENTS.NOT_BELONG_TO_YOU){e.next=11;break}return console.log("permission error",r),e.abrupt("return",n.getServerErrorState("Permission denined!"));case 11:return console.log("server error",r),e.abrupt("return",n.getServerErrorState("Server error"));case 13:e.next=16;break;case 15:return e.abrupt("return",{renderState:Nt.SAVED});case 16:case"end":return e.stop()}}),e)}))),n.handleDeleteEvent=Object(De.a)(we.a.mark((function e(){var t;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleDeleteEvent"),n.setState({isLoading:!0}),e.next=4,n.deleteEvent();case 4:t=e.sent,n.setState(Object(u.a)({isLoading:!1},t));case 6:case"end":return e.stop()}}),e)})));var a=n.props.match.params.id,s=new $e({_id:a});return n.state=Object(u.a)(Object(u.a)({},n.state),{},{event:s}),n}return Object(g.a)(r,[{key:"componentDidMount",value:function(){var e=Object(De.a)(we.a.mark((function e(){var t;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.next=3,this.loadEventDetails();case 3:t=e.sent,this.setState(Object(u.a)({isLoading:!1},t));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=null;switch(this.state.renderState){case Nt.INIT:e=Object(Ie.jsx)(_e,{});break;case Nt.NO_ROOMS:e=Object(Ie.jsx)(yt,{});break;case Nt.FAILURE:e=Object(Ie.jsx)(tt,{data:this.state.serviceMessage});break;case Nt.SAVED:e=Object(Ie.jsx)(qt,{});break;case Nt.COMMON:console.log(this.state.event),e=Object(Ie.jsx)(Yt,{handleDeleteEvent:this.handleDeleteEvent,isLoading:this.state.isLoading,event:this.state.event});break;default:e=Object(Ie.jsx)(rt,{data:"Application error"})}return Object(Ie.jsx)(Fe.a,{maxWidth:"md",className:"addEvent page ".concat(this.state.renderState),children:e})}}]),r}(It))||Wt)||Wt,Bt=(r(319),function(e){var t=e.location;return Object(Ie.jsx)("div",{className:"page404 page",children:Object(Ie.jsxs)("h3",{className:"text-center",children:["No match found for ",Object(Ie.jsx)("code",{children:t.pathname})]})})}),Gt=(r(320),function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(){return Object(O.a)(this,r),t.apply(this,arguments)}return Object(g.a)(r,[{key:"reloadWindow",value:function(){window.location.reload()}},{key:"render",value:function(){return Object(Ie.jsx)("div",{className:"serverError page",children:Object(Ie.jsxs)("center",{children:[Object(Ie.jsx)("h2",{children:"Hmm. We\u2019re having trouble loading that application"}),Object(Ie.jsx)(Ye.a,{variant:"contained",type:"button",color:"secondary",onClick:this.reloadWindow,children:"reload"})]})})}}]),r}(h.a.Component)),Xt=(r(321),function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(){return Object(O.a)(this,r),t.apply(this,arguments)}return Object(g.a)(r,[{key:"reloadWindow",value:function(){window.location.reload()}},{key:"render",value:function(){return Object(Ie.jsx)("div",{className:"appError page",children:Object(Ie.jsxs)("center",{children:[Object(Ie.jsx)("h2",{className:"error",children:"Something went wrong."}),Object(Ie.jsx)(Ye.a,{variant:"contained",type:"button",color:"secondary",onClick:this.reloadWindow,children:"reload"})]})})}}]),r}(h.a.Component)),Zt=(r(322),function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(){return Object(O.a)(this,r),t.apply(this,arguments)}return Object(g.a)(r,[{key:"reloadWindow",value:function(){window.location.reload()}},{key:"render",value:function(){return Object(Ie.jsx)("div",{className:"offline page",children:Object(Ie.jsxs)("center",{children:[Object(Ie.jsx)("h2",{children:"No internet connection"}),Object(Ie.jsx)(Ye.a,{variant:"contained",type:"button",color:"secondary",onClick:this.reloadWindow,children:"reload"})]})})}}]),r}(h.a.Component)),$t=r(115),Kt=r(367),Jt=r(268),Qt=r(373),er=r(377),tr=r(376),rr=r(372),nr=r(374),ar=r(375),sr=r(131),ir=_.a.create({baseURL:"https://tim.lookfor.be/api/v1/admin"}),or=function(){var e=Object(De.a)(we.a.mark((function e(){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ir.get("/rooms");case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",{error:!0,response:e.t0.response});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),cr=function(){var e=Object(De.a)(we.a.mark((function e(t){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ir.post("/rooms",{rooms:t});case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",{error:!0,response:e.t0.response});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),lr=function(){var e=Object(De.a)(we.a.mark((function e(t){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("axios deleteRoom width id: "+t),e.next=4,ir.delete("/rooms/".concat(t));case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{error:!0,response:e.t0.response});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),ur=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r="string"===typeof e?[e]:e;if(Array.isArray(r)){var n={};return r.forEach((function(e){"title"!==e||dr(t.title)||(n.title="Atleast 3 characaters required"),"number"!==e||hr(t.number)||(n.number="Invalid number")})),!Object.keys(n).length||n}};function dr(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return"string"===typeof e&&e.length>=3}function hr(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return console.log("number",e),!isNaN(e)&&""!==e}r(323);var pr,br=function(){return"D"},vr=function(){return"L"},mr=function(){return"LO"},jr=function(){return"R"},fr=function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(e){var n;return Object(O.a)(this,r),(n=t.call(this,e)).addRoomHandler=n.addRoomHandler.bind(Object(Lt.a)(n)),n.removeRoomHandler=n.removeRoomHandler.bind(Object(Lt.a)(n)),n.toggleStatusHandler=n.toggleStatusHandler.bind(Object(Lt.a)(n)),n.loadRooms=n.loadRooms.bind(Object(Lt.a)(n)),n.inputTimeoutx=null,n.inputSavingDelay=500,n.fields={number:{required:!0,text:"Number"},title:{required:!0,text:"Title"},status:{text:"Status"}},n.state={roomList:{page:1,rooms:[]},isLoading:!1,isLoaded:!1,errorMessage:""},n}return Object(g.a)(r,[{key:"getNewRoomSceleton",value:function(){return{_id:this.state.roomList.rooms.length,number:"",title:"",status:"CLOSED",isNew:!0}}},{key:"getRequiredFields",value:function(){var e=this;return Object.keys(this.fields).filter((function(t){return!0===e.fields[t].required}))}},{key:"scrollTop",value:function(){var e=document.querySelector(".rooms");e&&e.scrollIntoView({behavior:"smooth"})}},{key:"setErrorMessage",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setState({errorMessage:e}),t&&this.scrollTop()}},{key:"componentDidMount",value:function(){var e=Object(De.a)(we.a.mark((function e(){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadRooms();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadRooms",value:function(){var e=Object(De.a)(we.a.mark((function e(){var t,r,n,a;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.next=3,or();case 3:if(n=e.sent,this.setState({isLoading:!1,isLoaded:!0}),a=(null===(t=n.data)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.rooms)?n.data.data.rooms:[],!n.error&&Array.isArray(a)){e.next=10;break}return"Data loading failure",this.setErrorMessage("Data loading failure"),e.abrupt("return",!1);case 10:this.setState({errorMessage:"",roomList:{rooms:a}});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleStatusHandler",value:function(){var e=Object(De.a)(we.a.mark((function e(t){var r,n,a;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return console.error("roomId is required"),e.abrupt("return");case 3:if(r=this.state.roomList.rooms,n=r.find((function(e){return e._id===t}))){e.next=8;break}return console.error("Room with id:".concat(t," doesn't exist")),e.abrupt("return");case 8:if(a="CLOSED"===n.status?"ACTIVE":"CLOSED",n.status=a,!n.isNew){e.next=22;break}return e.prev=11,e.next=14,this.createNewRoom(n,{status:a});case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(11),console.error("toggleStatusHandler->createNewRoom",e.t0),this.setErrorMessage(e.t0.message);case 20:e.next=31;break;case 22:return e.prev=22,e.next=25,this.updateRoom(n,{status:a});case 25:e.next=31;break;case 27:e.prev=27,e.t1=e.catch(22),this.setErrorMessage(e.t1.message),console.error("toggleStatusHandler->updateRoom",e.t1);case 31:this.setState({roomList:{rooms:r}});case 32:case"end":return e.stop()}}),e,this,[[11,16],[22,27]])})));return function(t){return e.apply(this,arguments)}}()},{key:"updateRoomHandler",value:function(){var e=Object(De.a)(we.a.mark((function e(t,r){var n,a,s,i,o,c=this;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.name,["number","title"].includes(n)){e.next=4;break}return console.error("invalid target field"),e.abrupt("return");case 4:if(a=t.target.value,s=Object($t.a)({},n,a),i=this.state.roomList.rooms,(o=i.find((function(e){return e._id===r})))[n]=a,clearTimeout(this.inputTimeoutx),o){e.next=13;break}return console.err("updateRoomHandler nothing to save"),e.abrupt("return");case 13:this.inputTimeoutx=setTimeout(Object(De.a)(we.a.mark((function e(){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.isNew){e.next=12;break}return e.prev=1,e.next=4,c.createNewRoom(o);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),c.setErrorMessage(e.t0.message),console.log("updateRoomHandler-> createNewRoom",e.t0);case 10:e.next=21;break;case 12:return e.prev=12,e.next=15,c.updateRoom(o,s);case 15:e.next=21;break;case 17:e.prev=17,e.t1=e.catch(12),c.setErrorMessage(e.t1.message),console.log("updateRoomHandler-> updateRoom",e.t1);case 21:c.setState({roomList:{rooms:i}});case 22:case"end":return e.stop()}}),e,null,[[1,6],[12,17]])}))),this.inputSavingDelay);case 14:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"addRoomHandler",value:function(){var e=Object(De.a)(we.a.mark((function e(){var t;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=this.state.roomList.rooms).push(this.getNewRoomSceleton()),this.setState({roomList:{rooms:t}});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeRoomHandler",value:function(){var e=Object(De.a)(we.a.mark((function e(t){var r,n,a;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.state.roomList.rooms,n=!1,a=r.filter((function(e){return e._id!==t||(n=e,!1)})),n){e.next=6;break}return console.error("Nothing to delete"),e.abrupt("return");case 6:try{this.deleteRoom(n)&&this.setState({roomList:{rooms:a}})}catch(s){this.setErrorMessage(s.message)}case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteRoom",value:function(){var e=Object(De.a)(we.a.mark((function e(t){var r;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isNew){e.next=4;break}return e.abrupt("return",t);case 4:return e.next=6,lr(t._id);case 6:if(!(r=e.sent).error){e.next=13;break}if(1104!==r.response.data.code){e.next=10;break}return e.abrupt("return",t);case 10:throw new Error("Server Failure while removing");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"createNewRoom",value:function(){var e=Object(De.a)(we.a.mark((function e(t){var r,n,a,s,i,o,c,l;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isNew){e.next=2;break}throw new Error("This room in database");case 2:if(r=this.getRequiredFields(),t.errors={},!0===(n=ur(r,t))){e.next=8;break}return t.errors=n,e.abrupt("return",t);case 8:return a={},r.forEach((function(e){a[e]=t[e]})),e.next=12,cr(a);case 12:if(!(s=e.sent).error){e.next=18;break}(o=null===(i=s.response.data.data)||void 0===i?void 0:i.fields)&&"object"===typeof o&&Object.keys(o).forEach((function(e){return t.errors[e]=!0})),e.next=25;break;case 18:if(!(l=null===(c=s.data.data)||void 0===c?void 0:c.room._id)){e.next=24;break}t._id=l,delete t.isNew,e.next=25;break;case 24:throw new Error("Missed room id from server response");case 25:return e.abrupt("return",t);case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateRoom",value:function(){var e=Object(De.a)(we.a.mark((function e(t){var r,n,a,s,i,o,c,l=this,u=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]&&u[1],!t.isNew){e.next=3;break}throw new Error("This room does not exists in database");case 3:if("object"===typeof r){e.next=6;break}throw console.log(r),new Error("Invalid input data");case 6:if(n={_id:t._id},Object.keys(r).forEach((function(e){e in t&&(n[e]=r[e],t[e]=r[e])})),!0===(a=ur(Object.keys(n),n))){e.next=13;break}return t.errors=a,e.abrupt("return",t);case 13:return e.next=15,cr(n);case 15:return(s=e.sent).error&&((o=null===(i=s.response.data.data)||void 0===i?void 0:i.fields)&&"object"===typeof o&&(c=Object.keys(o),t.errors||(t.errors={}),c.forEach((function(e){return t.errors[e]=o[e]}))),1105===s.response.data.code&&(console.error("This room does not exists on database"),this.setErrorMessage("This room does not exists on database"),this.setState({isLoading:!0}),setTimeout((function(){l.loadRooms()}),2e3))),e.abrupt("return",t);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(Ie.jsx)(Fe.a,{maxWidth:"md",children:Object(Ie.jsxs)("div",{className:"component rooms",children:[!0===this.state.isLoading&&Object(Ie.jsx)("div",{className:"rooms__isLoading",children:Object(Ie.jsx)(Kt.a,{className:"",color:"secondary"})}),Object(Ie.jsxs)("div",{className:"rooms__header",children:[Object(Ie.jsx)("h2",{children:"Rooms Settings"}),Object(Ie.jsx)(Jt.a,{onClick:this.loadRooms,edge:"end","aria-label":"unlock",children:Object(Ie.jsx)(jr,{})})]}),Object(Ie.jsx)("div",{id:"rooms__errorMessage",children:this.state.errorMessage&&Object(Ie.jsx)(et.a,{className:"rooms__alert",severity:"warning",children:this.state.errorMessage})}),Object(Ie.jsx)(rr.a,{component:sr.a,className:"rooms__listRoom",children:Object(Ie.jsxs)(Qt.a,{"aria-label":"rooms",children:[Object(Ie.jsx)(nr.a,{children:Object(Ie.jsxs)(ar.a,{children:[Object(Ie.jsx)(tr.a,{"aria-label":"Number",className:"rooms__cellNumber",children:"Number"}),Object(Ie.jsx)(tr.a,{"aria-label":"Title",children:"Title"}),Object(Ie.jsx)(tr.a,{"aria-label":"Status",children:"Status"}),Object(Ie.jsx)(tr.a,{"aria-label":"",className:"rooms__cellActions"})]})}),Object(Ie.jsx)(er.a,{children:this.state.roomList.rooms.map((function(t,r){var n,a;return Object(Ie.jsxs)(ar.a,{children:[Object(Ie.jsx)(tr.a,{className:"rooms__cellNumber",children:Object(Ie.jsx)(He.a,{disabled:e.state.isLoading,name:"number",type:"text",error:!!(null===t||void 0===t||null===(n=t.errors)||void 0===n?void 0:n.number),fullwidth:!0,label:"Number:",variant:"outlined",onChange:function(r){return e.updateRoomHandler(r,t._id)},defaultValue:t.number})}),Object(Ie.jsx)(tr.a,{children:Object(Ie.jsx)(He.a,{disabled:e.state.isLoading,name:"title",type:"text",fullwidth:!0,error:!!(null===t||void 0===t||null===(a=t.errors)||void 0===a?void 0:a.title),variant:"outlined",label:"Title:",onChange:function(r){return e.updateRoomHandler(r,t._id)},defaultValue:t.title})}),Object(Ie.jsx)(tr.a,{className:"rooms__cellActions",children:Object(Ie.jsxs)("div",{className:"rooms__actionsContainer",children:["ACTIVE"===t.status&&Object(Ie.jsx)(Jt.a,{onClick:function(r){return e.toggleStatusHandler(t._id)},disabled:e.state.isLoading,edge:"end","aria-label":"lock",children:Object(Ie.jsx)(mr,{})}),"ACTIVE"!==t.status&&Object(Ie.jsx)(Jt.a,{disabled:e.state.isLoading,onClick:function(r){return e.toggleStatusHandler(t._id)},edge:"end","aria-label":"unlock",children:Object(Ie.jsx)(vr,{})})]})}),Object(Ie.jsx)(tr.a,{align:"right",children:Object(Ie.jsx)(Jt.a,{disabled:e.state.isLoading,onClick:function(){return e.removeRoomHandler(t._id)},edge:"end","aria-label":"delete",children:Object(Ie.jsx)(br,{})})})]},t._id)}))})]})}),this.state.isLoaded&&Object(Ie.jsx)(We.a,{children:Object(Ie.jsx)(Ye.a,{onClick:this.addRoomHandler,variant:"contained",color:"secondary",fullwidth:!0,type:"button",disabled:this.state.isLoading,children:"New room"})})]})})}}]),r}(h.a.Component),Or=r(378),gr=r(379),xr=r(260),yr=r(37),Sr="#fff",Er="#fff",kr="dark",wr=Object(xr.a)({palette:{type:kr,background:{default:"#191919"},primary:{main:"#282828",textColor:Sr,contrastText:Er},secondary:{main:yr.a.green[700],contrastText:Er},error:{main:yr.a.red[300],contrastText:Er}},overrides:{MuiTypography:{colorPrimary:{color:Sr}},MuiCssBaseline:{"@global":{html:{fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue","sans-serif"].join(", "),WebkitFontSmoothing:"antialiased",fontSize:16}}}}}),Dr=(r(324),Object(v.b)("userStore","appStore")(pr=Object(Le.g)(pr=Object(v.c)(pr=function(e){Object(N.a)(r,e);var t=Object(I.a)(r);function r(){return Object(O.a)(this,r),t.apply(this,arguments)}return Object(g.a)(r,[{key:"componentDidMount",value:function(){var e=Object(De.a)(we.a.mark((function e(){var t,r,n=this;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.appStore,r=this.props.userStore,t.isOnline){e.next=5;break}return t.setRenderState(k),e.abrupt("return");case 5:ge.verify().then((function(e){var a=e.response.getApiData();a.user||(t.setErrorMessage("Server error"),t.setRenderState(w),console.log("invalid response",a)),r.setUser(a.user),n.props.appStore.setRenderState(D)})).catch((function(e){var r,a=e.error,s=e.response;if(403!==(null===(r=a.response)||void 0===r?void 0:r.status))return t.setErrorMessage("Server error"),t.setRenderState(w),void console.log(s.message);n.props.appStore.setRenderState(D)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){console.info("App render",this.props.appStore.renderState);var e=this.props.userStore,t=e.loggedIn,r=e.isAdmin,n=null;switch(this.props.appStore.renderState){case E:n=Object(Ie.jsx)(_e,{});break;case w:n=Object(Ie.jsx)(Gt,{});break;case k:n=Object(Ie.jsx)(Zt,{});break;case D:n=Object(Ie.jsxs)(Le.d,{children:[Object(Ie.jsx)(Le.b,{path:"/login",component:qe}),Object(Ie.jsx)(Le.b,{path:"/register",component:ze}),Object(Ie.jsx)(Te,{path:"/events",exact:!0,component:kt,isLoggedIn:e.isLoggedIn}),Object(Ie.jsx)(Te,{path:"/events/add/:roomId?/:from?/:to?",component:Ht,isLoggedIn:e.isLoggedIn}),Object(Ie.jsx)(Te,{path:"/events/change/:id",exact:!0,component:Ut,isLoggedIn:e.isLoggedIn}),Object(Ie.jsx)(Te,{path:"/events/delete/:id",exact:!0,component:zt,isLoggedIn:e.isLoggedIn}),Object(Ie.jsx)(Te,{path:"/",exact:!0,component:kt,isLoggedIn:e.isLoggedIn}),Object(Ie.jsx)(Te,{path:"/@:username",component:nt,isLoggedIn:e.isLoggedIn}),Object(Ie.jsx)(Le.b,{path:"/rooms",component:fr,isAdmin:r,isLoggedIn:t}),Object(Ie.jsx)(Le.b,{component:Bt})]});break;default:n=Object(Ie.jsx)(Xt,{})}return Object(Ie.jsxs)(Or.a,{theme:wr,children:[Object(Ie.jsx)(gr.a,{}),Object(Ie.jsxs)("div",{className:"app",children:[Object(Ie.jsx)(Pe,{}),Object(Ie.jsx)("main",{children:Object(Ie.jsx)(Fe.a,{maxWidth:"lg",children:n})}),Object(Ie.jsx)(Ve,{})]})]})}}]),r}(h.a.Component))||pr)||pr)||pr),Lr=(r(325),{userStore:S,appStore:L,profileStore:Oe,authStore:Ee});console.log=function(){},b.a.render(Object(Ie.jsx)(v.a,Object(u.a)(Object(u.a)({},Lr),{},{children:Object(Ie.jsx)(m.a,{children:Object(Ie.jsx)(h.a.StrictMode,{children:Object(Ie.jsx)(Dr,{})})})})),document.getElementById("root")),j()}},[[326,1,2]]]);
//# sourceMappingURL=main.f6a3a1b3.chunk.js.map